\newcommand{\id}[2]{ \hat{\mathbb{I}}_{#1}^{(#2)}}
\newcommand{\strope}[1]{ e^{i \pi \phi _{#1}}}
\newcommand{\stropeall}[1]{ e^{i \pi \displaystyle{ \sum_{l < #1}} f_l^\dagger f_l}}
\newcommand{\fd}[1]{ f^\dagger_{#1}}
\newcommand{\f}[1]{ f_{#1}}
\newcommand{\equalprop}[1]{ \underset{#1}{=}}     
\newcommand{\DFTterm}[4]{\sum_{#1=1}^{#2} #3 e^{-\frac{2i\pi #1#4}{#2}}}


%%% Size-adaptive math: {\textbackslash}leftX \ldots {\textbackslash}rightX
\newcommand{\bb}[1]{\left(#1\right)}                                        %% parantheses
\newcommand{\bc}[1]{\left[#1\right]}                                        %% brackets
\newcommand{\absv}[1]{\left|#1\right|}                                      %% absolute value
\newcommand{\absvsq}[1]{\absv{#1}^2}                                        %% absolute value squared
\newcommand{\meanv}[1]{\left\langle #1\right\rangle}                        %% mean value
\newcommand{\sumd}[2]{\displaystyle{\sum_{#1}^{#2}}}						%% sum 
%%% Fixed-size math (for quickly changing from adaptive style)
\newcommand{\Bb}[1]{\big(#1\big)}                                           %% big parantheses
\newcommand{\BB}[1]{\Big(#1\Big)}                                           %% Big parantheses
\newcommand{\Bc}[1]{\big[#1\big]}                                           %% big brackets
\newcommand{\BC}[1]{\Big[#1\Big]}                                           %% Big brackets
\newcommand{\Absv}[1]{\big|#1\big|}                                         %% big absolute value
\newcommand{\ABSV}[1]{\Big|#1\Big|}                                         %% Big absolute value
\newcommand{\Absvsq}[1]{\Absv{#1}^2}                                        %% big absolute value squared
\newcommand{\ABSVSQ}[1]{\ABSV{#1}^2}                                        %% Big absolute value squared
\newcommand{\Comm}[2]{\big[#1, #2\big]}                                     %% big commutator
\newcommand{\COMM}[2]{\Big[#1, #2\Big]}                                     %% Big commutator
\newcommand{\Meanv}[1]{\big\langle #1\big\rangle}                           %% big mean value
\newcommand{\MEANV}[1]{\Big\langle #1\Big\rangle}                           %% Big mean value


\newcommand{\braketop}[3]{\left\langle #1\middle|#2\middle|#3\right\rangle}  %% matrix element
\newcommand{\smallbraketop}[3]{\langle #1|#2|#3\rangle}                      %% small matrix element

%%% Special functions
\newcommand{\deltaf}[1]{\ensuremath{\delta\!\bb{#1}}\xspace}                    %% delta function
\newcommand{\thetaf}[1]{\ensuremath{\theta\!\bb{#1}}\xspace}                    %% theta function
\newcommand{\expf}[1]{\ensuremath{\operatorname{\text{exp}}\!\bb{#1}}\xspace}   %% exponential function
\newcommand{\ef}[1]{\ensuremath{\operatorname{e}^{#1}}\xspace}                  %% exponential function
\newcommand{\Refn}[1]{\ensuremath{\operatorname{Re}\!\bb{#1}}\xspace}           %% real part, function form
\newcommand{\Imfn}[1]{\ensuremath{\operatorname{Im}\!\bb{#1}}\xspace}           %% imaginary part, function form
\renewcommand{\Re}{\operatorname{Re}}                                           %% real part
\renewcommand{\Im}{\operatorname{Im}}                                           %% imaginary part

%%% Named states
\newcommand{\ketPsi}{\ket{\Psi}}
\newcommand{\ketpsit}{\ket{\psi(t)}}
\newcommand{\ketpsitime}[1]{\ket{\psi(#1)}}

\newcommand{\ketpsi}{\ket{\psi}}
\newcommand{\ketphi}{\ket{\varphi}}
\newcommand{\ketup}{\ket{\uparrow}}      %% spin up
\newcommand{\ketdn}{\ket{\downarrow}}    %% spin down
\newcommand{\ketzero}{\ket{0}}
\newcommand{\ketone}{\ket{1}}
\newcommand{\ketg}{\ket{g}}              %% ground state
\newcommand{\kete}{\ket{e}}              %% excited state
\newcommand{\vac}{\ket{\text{vac}}}      %% vacuum
\newcommand{\up}{\uparrow}
\newcommand{\down}{\downarrow}

%%% Pauli matrices
\newcommand{\sx}[1]{\hat{\sigma}_{#1}^x}
\newcommand{\sy}[1]{\hat{\sigma}_{#1}^y}
\newcommand{\sz}[1]{\hat{\sigma}_{#1}^z}
\newcommand{\splus}[1]{\hat{\sigma}_{#1}^+}
\newcommand{\sminus}[1]{\hat{\sigma}_{#1}^-}

%%% Vectors
\newcommand{\vecr}{\vec{r}}
\newcommand{\vecrone}{\vec{r_1}}
\newcommand{\vecrtwo}{\vec{r_2}}
\newcommand{\vecrn}{\vec{r_N}}
\newcommand{\vecri}{\vec{r_i}}
\newcommand{\vecrj}{\vec{r_j}}
\newcommand{\vecR}{\vec{R}}
\newcommand{\vecx}{\vec{x}}
\newcommand{\vecy}{\vec{y}}
\newcommand{\vecz}{\vec{z}}
\newcommand{\vecxi}{\vec{x_i}}
\newcommand{\vecxj}{\vec{x_j}}
\newcommand{\veck}{\vec{k}}
\newcommand{\vecq}{\vec{q}}
\newcommand{\vecp}{\vec{p}}
\newcommand{\vecd}{\vec{d}}
\newcommand{\vecmu}{\boldsymbol{\mu}}
\newcommand{\vecsigma}{\boldsymbol{\sigma}}

%%% Differentiation
\newcommand{\partiald}[1]{\frac{\partial}{\partial #1}}               %% partial differentiation
\newcommand{\laplace}{\operatorname{\nabla^2}}                        %% laplace operator

%%% Integration
\newcommand{\integral}[1]{\int \! \mathrm{d} #1\,}                    %% integral
\newcommand{\integralb}[3]{\int\limits_{#1}^{#2} \! \mathrm{d} #3\,}  %% integral with boundaries
\newcommand{\integralf}[2]{\int \! \frac{\mathrm{d} #1}{#2}\,}        %% integral with fraction
\newcommand{\intvol}{\integral{^3r}}                                  %% integral over r space
\newcommand{\intvolp}{\integral{^3r'}}                                %% integral over r' space
\newcommand{\intvold}{\intvol\!\intvolp}                              %% double integral over space
\newcommand{\intk}{\integral{^3k}}                                    %% integral over k space
\newcommand{\intkp}{\integral{^3k'}}                                  %% integral over k' space
\newcommand{\intkn}{\integralf{^3k}{(2\pi)^3}}                        %% normalized integral over k space
\newcommand{\intkpn}{\integralf{^3k'}{(2\pi)^3}}                      %% normalized integral over k' space

%%% Special symbols
\newcommand{\hc}{\mathop{\text{h.c.}}}                               %% hermitian conjugate
\newcommand{\hamil}{\hat{\mathcal{H}}}    %% Hamilton operator
\newcommand{\hastobe}{\stackrel{!}{=}}                               %% has to be
\newcommand{\eqhat}{\mathrel{\widehat{=}}}                           %% corresponds to, is equivalent
\newcommand{\const}{\mathop{\text{const.}}}                          %% hermitian conjugate
\newcommand{\goesto}{\longrightarrow}                                %% maps to, asymptotically goes to
\newcommand{\basis}{\mathcal{B}}                                                %% maps to, asymptotically goes to
\newcommand{\opevolution}[1]{\mathcal{U}(t,#1)}                                                %% maps to, asymptotically goes to

%%% Second quantization
\newcommand{\aop}{\ensuremath{a^{\vphantom\dagger}}\xspace}          %% annihilation operator a
\newcommand{\aopd}{\ensuremath{a^\dagger}\xspace}                    %% creation operator a

\newcommand{\bop}{\ensuremath{b^{\vphantom\dagger}}\xspace}          %% annihilation operator b
\newcommand{\bopd}{\ensuremath{b^\dagger}\xspace}                    %% creation operator b

\newcommand{\cop}{\ensuremath{c^{\vphantom\dagger}}\xspace}          %% annihilation operator c
\newcommand{\copd}{\ensuremath{c^\dagger}\xspace}                    %% creation operator c

\newcommand{\nop}{\ensuremath{n}\xspace}                             %% number operator

\newcommand{\psiop}{\ensuremath{\psi^{\vphantom\dagger}}\xspace}     %% field operator psi
\newcommand{\psiopd}{\ensuremath{\psi^\dagger}\xspace}               %% creation operator psi

\newcommand{\PsiOp}{\ensuremath{\Psi^{\vphantom\dagger}}\xspace}     %% field operator Psi
\newcommand{\PsiOpd}{\ensuremath{\Psi^\dagger}\xspace}               %% creation operator Psi

%%% Differences
\newcommand{\Dx}{\Delta x}
\newcommand{\Dy}{\Delta y}
\newcommand{\Dt}{\Delta t}


%%% Figures

\newcommand{\graphli}[4]{
	\begin{figure}[h!]
		\centering
		\includegraphics[width=#1\linewidth]{#2}
		\caption{#3}
		\label{fig:#4}
	\end{figure}
} %%! options, filename



\newcommand{\igopt}[2]{\includegraphics[#1]{#2}} %%! options, filename

\newcommand{\ig}[2]{\igopt{width=#1\columnwidth}{#2}} %%! width in units of textwidth, filename

\newcommand{\figopt}[4]{ %%! width, filename, caption, placement (h, t, ht)
	\begin{figure}[#4]
		\centering
		\ig{#1}{#2}
		\caption{#3}
		\label{fig:#2}
	\end{figure}
}

\newcommand{\fig}[3]{ %%! width, filename, caption
	\figopt{#1}{#2}{#3}{ht}
}

\newcommand{\doublefigopt}[8]{ %%! w1, f1, c1, w2, f2, c2, main caption, placement
	\begin{figure}[#8]
		\centering
		\subfloat[#3]{
			\ig{#1}{#2}
			\label{fig:#2}
		}
		\subfloat[#6]{
			\ig{#4}{#5}
			\label{fig:#5}
		}
		\caption{#7}
		\label{fig:#2_#5}
	\end{figure}
}

\newcommand{\doublefig}[7]{\doublefigopt{#1}{#2}{#3}{#4}{#5}{#6}{#7}{ht}} %%! w1, f1, c1, w2, f2, c2, main caption



\newcounter{prop}
\newcommand{\myprop}[3]{%
	\refstepcounter{prop}%
	\begin{tcolorbox}[
		enhanced,
		colback=white,
		colframe=darkpastelblue,
		fonttitle=\bfseries,
		title=Proposition \theprop: #1,
		attach boxed title to top left={yshift=-2mm, xshift=0.5cm},
		boxed title style={colback=darkpastelblue, size=small},
		sharp corners=all
		]
		\label{prop:#3} #2
	\end{tcolorbox}
}

\newcounter{thm}
\newcommand{\myth}[3]{%
	\refstepcounter{thm}%
	\begin{tcolorbox}[
		enhanced,
		colback=white,
		colframe=harvardcrimson,
		fonttitle=\bfseries,
		title=Theorem \thethm: #1,
		attach boxed title to top left={yshift=-2mm, xshift=0.5cm},
		boxed title style={colback=harvardcrimson, size=small},
		sharp corners=all
		]
		\label{thm:#3}#2
	\end{tcolorbox}
}

\newcounter{coro}
\newcommand{\mycoro}[3]{%
	\refstepcounter{coro}%
	\begin{tcolorbox}[
		enhanced,
		colback=white,
		colframe=aurometalsaurus,
		fonttitle=\bfseries,
		title=Corollary \thecoro: #1,
		attach boxed title to top left={yshift=-2mm, xshift=0.5cm},
		boxed title style={colback=aurometalsaurus, size=small},
		sharp corners=all
		]
		\label{coro:#3}#2
	\end{tcolorbox}
}

\newcounter{defn}
\newcommand{\mydef}[3]{%
	\refstepcounter{defn}%
	\begin{tcolorbox}[
		enhanced,
		colback=white,
		colframe=asparagus,
		fonttitle=\bfseries,
		title=Definition \thedefn: #1,
		attach boxed title to top left={yshift=-2mm, xshift=0.5cm},
		boxed title style={colback=asparagus, size=small},
		sharp corners=all
		]
		\label{def:#3} #2
	\end{tcolorbox}
}

\newcounter{lem}
\newcommand{\mylemma}[3]{% tilte, text, label
	\refstepcounter{lem}%
	\begin{tcolorbox}[
		enhanced,
		colback=white,
		colframe=orange,
		fonttitle=\bfseries,
		title=Lemma \thelem: #1,
		attach boxed title to top left={yshift=-2mm, xshift=0.5cm},
		boxed title style={colback=orange, size=small},
		sharp corners=all
		]
		\label{lem:#3} #2
	\end{tcolorbox}
}

\newcounter{postulat}
\newcommand{\mypostulat}[3]{%
	\refstepcounter{postulat}%
	\begin{tcolorbox}[
		enhanced,
		colback=white,
		colframe=darkgray,
		fonttitle=\bfseries,
		title=Postulate \thepostulat: #1,
		attach boxed title to top left={yshift=-2mm, xshift=0.5cm},
		boxed title style={colback=darkgray, size=small},
		sharp corners=all
		]
		\label{postulat:#3} #2
	\end{tcolorbox}
}

% Reference commands
\newcommand{\refig}[1]{\hyperref[#1]{Figure~\ref{#1}}}
\newcommand{\refth}[1]{\hyperref[#1]{Theorem~\ref*{#1}}}
\newcommand{\refprop}[1]{\hyperref[#1]{Proposition~\ref*{#1}}}
\newcommand{\refcoro}[1]{\hyperref[#1]{Corollary~\ref*{#1}}}
\newcommand{\refdef}[1]{\hyperref[#1]{Definition~\ref*{#1}}}
\newcommand{\reflem}[1]{\hyperref[#1]{Lemma~\ref*{#1}}}
\newcommand{\refpostulat}[1]{\hyperref[Postulat:#1]{postulate~\ref*{#1}}}
\newcommand{\myeqref}[1]{\hyperref[#1]{Equation~\ref*{#1}}}
